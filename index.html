<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚¢ã‚¯ã‚»ã‚¹èªè¨¼</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .container {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 400px;
            text-align: center;
        }

        .logo {
            font-size: 2rem;
            margin-bottom: 1rem;
            color: #333;
        }

        h1 {
            color: #333;
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
            font-weight: 600;
        }

        .form-group {
            margin-bottom: 1.5rem;
            text-align: left;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            color: #555;
            font-weight: 500;
        }

        input[type="password"] {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        input[type="password"]:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            width: 100%;
            padding: 0.75rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease;
            margin-bottom: 0.5rem;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: #6c757d;
        }

        .error {
            color: #e74c3c;
            margin-top: 1rem;
            font-size: 0.9rem;
        }

        .success {
            color: #27ae60;
            margin-top: 1rem;
            font-size: 0.9rem;
        }

        .authenticated-state {
            display: none;
        }

        .access-buttons {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .info {
            background: #e8f4f8;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            font-size: 0.9rem;
            color: #2c5282;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- æœªèªè¨¼çŠ¶æ…‹ -->
        <div id="loginState">
            <div class="logo">ğŸ”’</div>
            <h1>ã‚¢ã‚¯ã‚»ã‚¹èªè¨¼ãŒå¿…è¦ã§ã™</h1>
            <form id="passwordForm">
                <div class="form-group">
                    <label for="password">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰:</label>
                    <input type="password" id="password" name="password" required>
                </div>
                <button type="submit" class="btn">ã‚¢ã‚¯ã‚»ã‚¹</button>
            </form>
            <div id="error" class="error" style="display: none;"></div>
        </div>

        <!-- èªè¨¼æ¸ˆã¿çŠ¶æ…‹ -->
        <div id="authenticatedState" class="authenticated-state">
            <div class="logo">âœ…</div>
            <h1>èªè¨¼å®Œäº†</h1>
            <div class="info">
                èªè¨¼ãŒå®Œäº†ã—ã¾ã—ãŸã€‚Notionãƒšãƒ¼ã‚¸ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚
            </div>
            <div class="access-buttons">
                <button class="btn" onclick="openNotionPage()">Notionãƒšãƒ¼ã‚¸ã‚’é–‹ã</button>
                <button class="btn" onclick="openNotionNewTab()">æ–°ã—ã„ã‚¿ãƒ–ã§é–‹ã</button>
                <button class="btn btn-secondary" onclick="logout()">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
            </div>
            <div id="sessionInfo" style="margin-top: 1rem; font-size: 0.8rem; color: #666;"></div>
        </div>
    </div>

    <script>
        // ã“ã“ã«Notionã®å…¬é–‹URLã‚’è¨­å®šã—ã¦ãã ã•ã„
        const NOTION_URL = 'https://ritsuanstc.notion.site/AI-LLM-207bb904c7da8001af4ce24021729686?source=copy_link';
        
        // ã“ã“ã«ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’è¨­å®šã—ã¦ãã ã•ã„ï¼ˆå®šæœŸçš„ã«å¤‰æ›´ï¼‰
        const CORRECT_PASSWORD = 'your-password-2025';
        
        // ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ç”¨ã®ã‚­ãƒ¼
        const SESSION_KEY = 'notion_access_granted';
        const SESSION_TIME_KEY = 'notion_access_time';
        
        // ã‚»ãƒƒã‚·ãƒ§ãƒ³æœ‰åŠ¹æœŸé™ï¼ˆ24æ™‚é–“ï¼‰
        const SESSION_DURATION = 24 * 60 * 60 * 1000;
        
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ãƒã‚§ãƒƒã‚¯
        window.addEventListener('load', function() {
            checkAuthentication();
            document.getElementById('password').focus();
        });
        
        // èªè¨¼çŠ¶æ…‹ã‚’ãƒã‚§ãƒƒã‚¯
        function checkAuthentication() {
            const isAuthenticated = sessionStorage.getItem(SESSION_KEY);
            const authTime = sessionStorage.getItem(SESSION_TIME_KEY);
            const currentTime = new Date().getTime();
            
            if (isAuthenticated === 'true' && authTime && (currentTime - parseInt(authTime) < SESSION_DURATION)) {
                showAuthenticatedState();
                updateSessionInfo(parseInt(authTime));
            } else {
                // ã‚»ãƒƒã‚·ãƒ§ãƒ³æœŸé™åˆ‡ã‚Œã®å ´åˆã¯ã‚¯ãƒªã‚¢
                sessionStorage.removeItem(SESSION_KEY);
                sessionStorage.removeItem(SESSION_TIME_KEY);
                showLoginState();
            }
        }
        
        // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒ ã®å‡¦ç†
        document.getElementById('passwordForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const password = document.getElementById('password').value;
            const errorDiv = document.getElementById('error');
            
            if (password === CORRECT_PASSWORD) {
                // èªè¨¼æˆåŠŸ
                const currentTime = new Date().getTime();
                sessionStorage.setItem(SESSION_KEY, 'true');
                sessionStorage.setItem(SESSION_TIME_KEY, currentTime.toString());
                showAuthenticatedState();
                updateSessionInfo(currentTime);
                errorDiv.style.display = 'none';
            } else {
                // èªè¨¼å¤±æ•—
                errorDiv.textContent = 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé–“é•ã£ã¦ã„ã¾ã™ã€‚';
                errorDiv.style.display = 'block';
                document.getElementById('password').value = '';
                document.getElementById('password').focus();
            }
        });
        
        // ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã‚’è¡¨ç¤º
        function showLoginState() {
            document.getElementById('loginState').style.display = 'block';
            document.getElementById('authenticatedState').style.display = 'none';
        }
        
        // èªè¨¼æ¸ˆã¿çŠ¶æ…‹ã‚’è¡¨ç¤º
        function showAuthenticatedState() {
            document.getElementById('loginState').style.display = 'none';
            document.getElementById('authenticatedState').style.display = 'block';
        }
        
        // ã‚»ãƒƒã‚·ãƒ§ãƒ³æƒ…å ±ã‚’æ›´æ–°
        function updateSessionInfo(authTime) {
            const expiryTime = new Date(authTime + SESSION_DURATION);
            document.getElementById('sessionInfo').textContent = 
                `ã‚»ãƒƒã‚·ãƒ§ãƒ³æœ‰åŠ¹æœŸé™: ${expiryTime.toLocaleString('ja-JP')}`;
        }
        
        // Notionãƒšãƒ¼ã‚¸ã‚’åŒã˜ã‚¿ãƒ–ã§é–‹ã
        function openNotionPage() {
            window.location.href = NOTION_URL;
        }
        
        // Notionãƒšãƒ¼ã‚¸ã‚’æ–°ã—ã„ã‚¿ãƒ–ã§é–‹ã
        function openNotionNewTab() {
            window.open(NOTION_URL, '_blank');
        }
        
        // ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå‡¦ç†
        function logout() {
            sessionStorage.removeItem(SESSION_KEY);
            sessionStorage.removeItem(SESSION_TIME_KEY);
            document.getElementById('password').value = '';
            showLoginState();
            document.getElementById('password').focus();
        }
        
        // å®šæœŸçš„ã«ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ã‚’ãƒã‚§ãƒƒã‚¯
        setInterval(checkAuthentication, 60000); // 1åˆ†ã”ã¨
    </script>
</body>
</html>
